@using System.Web.Optimization
@using teaCRM.Entity
@{
    //客户扩展字段信息
    var customerFields = (List<teaCRM.Entity.TFunExpand>) ViewBag.CustomerExpandFields;
    //联系人扩展字段信息
    var contactFields = (List<teaCRM.Entity.TFunExpand>) ViewBag.ContactExpandFields;
    Layout = null;
}
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>我的人脉_C+企业云平台_打造中国办公软件第一品牌</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=Edge" />

        @Styles.Render("~/Themes/default/css/cp.globle.min6.css")
        @Scripts.Render("~/Themes/default/js/cp.globle.min6.js")

        <script type="text/javascript">
            var grid;
            $(function() {
                InitGrid();
            });

            function InitGrid() {

                grid = $("#grid-data").bootgrid({
                    ajax: true,
                    post: function() {
                        /* To accumulate custom parameter with the request object */
                        return {
                            compNum: $("#CompNum").val(),
                            cus_id: $("#cus_id").val()
                        };
                    },
                    url: "/api/crm/contact/GetAllContacts",
                    selection: true,
                    multiSelect: true,
                    rowSelect: true,
                    keepSelection: true,
                    rowCount: [10, 30, 50],
                    templates: {
                        header: "<div id=\"{{ctx.id}}\" class=\"{{css.header}}\"><div class=\"row\"><div class=\"col-sm-12 actionBar\"><div class=\"btn-group\" style=\"float:left;\"><button class=\"btn btn-default tip\" title=\"添加联系人\" onclick=\" add(); \"><span class=\"glyphicon glyphicon-plus\"></span>添加</button><button class=\"btn btn-default tip\" title=\"删除联系人\" onclick=\" del(); \"><span class=\"glyphicon glyphicon glyphicon glyphicon-trash\"></span>批量删除</button></div>" +
                            "<div class=\"search form-group\"><div class=\"input-group\"><span class=\"icon glyphicon input-group-addon glyphicon-search\"></span> <input type=\"text\" class=\"search-field form-control\" placeholder=\"输入关键字\"></div></div>" +
                            "<p class=\"{{css.actions}}\"></p></div></div></div>"
                    },
                    labels: {
                        all: "all", //checkbox全选的值
                        search: "请输入联系人名称",
                        loading: "加载中...",
                        noResults: "对不起，暂无符合条件的记录！",
                        refresh: "刷新",
                        infos: "从{{ctx.start}} 到 {{ctx.end}}，共{{ctx.total}} 条记录"
                    },
                    formatters: {
                        "con_is_main": function(column, row) {
                            if (!row.con_is_main) {
                                return "否";
                            } else {
                                return "是";
                            }
                        },
                        "commands": function(column, row) {
                            return "<button type=\"button\"  class=\"btn btn-link btn-sm btn-cmd tip\" onclick=\"edit(" + row.id + ");\" title=\"修改联系人【" + row.con_name + "】\"><span class=\"glyphicon glyphicon-pencil\"></span></button>" +
                                "<button type=\"button\" class=\"btn btn-link btn-sm btn-cmd tip\" onclick=\"del(" + row.id + ")\" title=\"删除联系人【" + row.con_name + "】\"><span class=\"glyphicon glyphicon-remove\"></span></button>";
                        }
                    }
                }).on("loaded.rs.jquery.bootgrid", function(e) {
                    //按钮提示
                    $('.tip').tooltip();
                    //按钮气泡
                    $('.pop').popover({ html: true, trigger: "hover" });
                    //showMsg("字段加载成功！", "Success");
                });
            }
        </script>
    </head>
    <body>
        <!--客户id-->
        <input type="hidden" id="cus_id" name="cus_id" value="@ViewBag.CustomerId" />
        <input type="hidden" id="CompNum" name="CompNum" value="@Session[teaCRMKeys.SESSION_USER_COMPANY_INFO_NUM]" />

        <table id="grid-data" class="table table-condensed table-hover table-striped table-bordered" data-selection="true" data-multi-select="true">
            <thead>
                <tr>
                    <th data-column-id="cus_id" data-header-align="center" data-align="center"  data-order="desc">所属客户</th>
                    <th data-column-id="con_name" data-header-align="center" data-align="center"  data-order="desc">联系人名称</th>
                    <th data-column-id="con_tel" data-header-align="center" data-align="center"  data-order="desc">联系人电话</th>
                    <th data-column-id="con_qq" data-header-align="center" data-align="center"  data-order="desc">联系人QQ</th>
                    <th data-column-id="con_email" data-header-align="center" data-align="center"  data-order="desc">联系人邮箱</th>
                    <th data-column-id="con_is_main" data-formatter="con_is_main" data-header-align="center" data-align="center"  data-order="desc">是否主联系人</th>
                    <th data-column-id="id" data-type="numeric" data-identifier="true" data-formatter="commands" data-sortable="false">操作</th>
                </tr>
            </thead>
        </table>
    </body>
</html>